---
layout: wiki
title: spam_admin 管理工具使用说明
---

<H3> 先看下USAGE</H3>
<textarea class="code">
$ ./libexec/spam_admin 
USAGE:
  ./libexec/spam_admin good        traindb                   eml_file/eml_dir
  ./libexec/spam_admin bad         traindb                   eml_file/eml_dir
  ./libexec/spam_admin test        db [ db2 [ ...]]          eml_file/eml_dir
  ./libexec/spam_admin view        eml_file                                  
  ./libexec/spam_admin segment     eml_file                                  
  ./libexec/spam_admin charset     filename                                  
  ./libexec/spam_admin merge_db    constdb_or_traindb        traindb         
  ./libexec/spam_admin convert_db  traindb                   new_constdb
</textarea>
<ul>
<li>good/bad/test/view/segment/charset/merge_db/convert_db 是第一个参数,表明功能.</li>
<li>constdb 表示一个只读的数据库文件.</li>
<li>traindb 表示个可写的数据库文件(sqlite3).</li>
<li>eml_file 表示一个邮件文件.</li>
<li>eml_dir 表示一个目录,其下(及递归子目录下)的文件为邮件</li>
</ul>

<H3>good: 训练正常信件</H3>
<pre>
./libexec/spam_admin good a.tdb ./a.eml
./libexec/spam_admin good a.tdb /spam/emls/good/
</pre>

<H3>bad: 训练垃圾信件</H3>
<pre>
./libexec/spam_admin bad a.tdb ./b.eml
./libexec/spam_admin bad a.tdb /spam/emls/bad/
</pre>

<H3>test: 测试信件得分</H3>
<p>获得一个目录(/spam/emls/test/)下所有邮件的得分.
<pre>
./libexec/spam_admin test a.tdb /spam/emls/test/
</pre>

<p>获得一个目录(/spam/emls/test/)下所有邮件的得分, 更多反垃圾库.
<pre>
./libexec/spam_admin test a.tdb b.tdb c.tdb d.cdb e.cdb...  /spam/emls/test/
</pre>

<p>获得一个邮件的得分, 并且给出更详细的得分信息.
<pre>
./libexec/spam_admin test a.tdb b.tdb c.tdb d.cdb e.cdb...  /spam/emls/test/someone.eml
</pre>

<H3>view: 查看信件</H3>
<p>解开一封信件, 返回非常详细的信件信息.
包括主题,发件人,收件人,...,正文,附件名,...mime格式等.
<br>并且会把可读信息信转为UTF-8
<pre>
./libexec/spam_admin view /somepath/somepath2/a.eml
</pre>

<H3>segment: 信件分次</H3>
<p>对一封信件,做分次操作,查看分次结果,用于调试.
<pre>
./libexec/spam_admin segment /somepath/somepath2/a.eml
</pre>

<H3>merge_db: 合并数据库</H3>
<p>把一个发垃圾数据库(既可以是constdb,也可以是traindb), 合并到一个traindb.
<pre>
./libexec/spam_admin merge_db a.cdb dest.tdb
./libexec/spam_admin merge_db b.tdb dest.tdb
</pre>
<p>如果 dest.tdb不存在,会创建一个.

<H3>convert_db: 数据库格式转换</H3>
<p>把一个traindb转换为constdb.因为constdb比traindb快的多得多.
<pre>
./libexec/spam_admin convert_db a.tdb a.cdb
</pre>
<p>a.cdb如果不存在,则创建一个,否则被覆盖.

