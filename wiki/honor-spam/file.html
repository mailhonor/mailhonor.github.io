---
layout: wiki
title: 文件目录说明及配置
---

<H3>文件目录结构说明</H3>
<table>
<tr>
    <td width="300"><B>/opt/honor_spam/</B></td>
    <td>系统默认安装路径, 服务运行时路径.</td>
</tr>
<tr>
    <td><B>./master.cf</B></td>
    <td>服务配置文件,可设置服务端口</td>
</tr>
<tr>
    <td><B>./config/spamd.cf</B></td>
    <td>反垃圾程序配置文件</td>
</tr>
<tr>
    <td><B>./spamdb/const.db</B></td>
    <td>反垃圾库,只读,高速.</td>
</tr>
<tr>
    <td><B>./spamdb/train.db</B></td>
    <td>反垃圾库,用于训练(回馈,喂养).速度较慢,实际上是sqlite3.</td>
</tr>
<tr>
    <td><B>./libexec/spam_master</B></td>
    <td>服务管理程序.</td>
</tr>
<tr>
    <td><B>./libexec/spamd</B></td>
    <td>反垃圾主程序</td>
</tr>
<tr>
    <td><B>./libexec/honor_spamd.sh</B></td>
    <td>启动/停止/重启 脚本</td>
</tr>
<tr>
    <td><B>./libexec/spam_admin</B></td>
    <td>一个命令工具,<A href="./admin.html">详细</A></td>
</tr>
<tr>
    <td><B></B></td>
    <td></td>
</tr>
</table>

<H3>配置文件 ./master.cf</H3>
<pre>
[zserver spamd]
   zcmd = libexec/spamd 
   zconfig = config/spamd.cf
   zlisten = 127.0.0.1:32502
</pre>
<p> 意思是：一个命名为spamd的服务,其程序libexec/spamd,打开端口127.0.0.1:32502,读取配置文件 config/spamd.cf.
<p> 此配置是<A target="_blank" href="/wiki/libzc/master.html">libzc</A>中的配置风格.
字母z开头的配置项为libzc系统保留字.
<p> zlisten 是监听端口配置，分两类,网络端口(有:冒号)和unix套接字.如:
<ul>
    <li>zlisten = 0:32502 #打开全部网络设备的32502端口</li>
    <li>zlisten = ../some/unix/domainsokect #打开unix套接字,其路径为 ../some/unix/domainsokect</li>
    <li>zlisten = 0:32502, 127.0.0.1:32500, /another/unixdomain, ../some/unix/domainsokect #上述组合,共4个端口
</ul>

<H3>配置文件 ./config/spamd.cf</H3>
<pre>
concurrency_limit = 8
spam_constdb = spamdb/const.db
spam_traindb = spamdb/train.db
</pre>
<ul>
    <li>concurrency_limit 工作线程数</li>
    <li>spam_constdb 只读反垃圾库设置</li>
    <li>spam_traindb 可写反垃圾库设置(用于训练，反馈）</li>
</ul>
